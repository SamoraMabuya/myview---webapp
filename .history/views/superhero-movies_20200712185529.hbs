<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyView:Superheroes</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/superhero-movies.css">
</head>
<script src="/socket.io/socket.io.js"></script>
<script>
    var server = "http://localhost:5500"
    var socket = io(server);


    function sendMessage() {

    io.emit("new_message", "Hello server");

    return false;

    }

    io.on("new_message", function (results) {
        console.log("Server says", results);
    });

    results.forEach((comments) => {
            var node = document.createElement("div");
            var username = document.createElement("H5")
            var date = document.createElement("H6")
            var message = document.createElement("p");

            node.className = 'card-body';
            username.className = 'card-title';
            date.className = 'card-subtitle text-muted'

            var display_username = document.createTextNode('username: ' + users.username);
            var display_date = document.createTextNode('date: ' + users.date);
            var display_comments = document.createTextNode('comments: ' + users.comments);

            username.appendChild(display_username);
            date.appendChild(display_date);
            message.appendChild(display_comments);

            node.appendChild(username);
            node.appendChild(date);
            node.appendChild(message);

            document.getElementById('comments').appendChild(node);
    });
     
</script>

<body onload="sendMessage();" >
    <div class="container">
        <h1>Welcome</h1>
        <div id="comments" class="card mb-2">
            {{!-- <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                <br>
                Some quick example text to build on the card title and make up the bulk of the
                card's content.
            </div> --}}
        </div>



        <hr>

        <div id="main-content">
            <h3>Leave your comments below</h3>
            <div class="form-group">
                <label for="name">Name:</label>
                <input class="form-control" type="text" id="name" Required>
            </div>
            <div class="form-group">
                <label for="message">Type Comment Below</label>
                <textarea class="form-control" id="message" Required></textarea>
            </div>
            <button type="button" class="btn btn-success">Comment!</button>
        </div>

    </div>

    </div>
    <script src="/javascript/superhero-movies.js"></script>
    <script src="/reload/reload.js"></script>

</body>

</html>